!function(){google.maps.event.addDomListener(window,"load",function(){var findCountry,geocoder,hidden,infoTemplate,infoWindow,map,marker,proxySwitchEnabled;return google.maps.visualRefresh=!0,hidden=function(feature){return{featureType:feature,stylers:[{visibility:"off"}]}},map=new google.maps.Map(document.getElementById("map-container"),{zoom:3,center:new google.maps.LatLng(32,0),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,panControl:!1,streetViewControl:!1,styles:[hidden("administrative.province"),hidden("administrative.locality"),hidden("administrative.neighborhood"),hidden("road"),hidden("poi"),hidden("transit")]}),google.maps.event.addListener(map,"zoom_changed",function(min,max){return function(){var zoom;return zoom=map.getZoom(),min>zoom?map.setZoom(min):zoom>max?map.setZoom(max):void 0}}(3,6)),geocoder=new google.maps.Geocoder,findCountry=function(latLng){var deferred;return deferred=new $.Deferred,geocoder.geocode({latLng:latLng},function(records,status){var record,_i,_len;if(status===google.maps.GeocoderStatus.OK)for(_i=0,_len=records.length;_len>_i;_i++)if(record=records[_i],-1!==record.types.indexOf("country"))return deferred.resolve(record);return deferred.reject()}),deferred},google.maps.event.addListener(map,"click",function(event){return map.setCenter(event.latLng),findCountry(event.latLng).done(function(country){var countryCode,url;return countryCode=country.address_components[0].short_name,url="http://www.xroxy.com/proxylist.php?type=transparent&country="+countryCode+"&sort=latency",$.get(url,function(data){var $response,proxyCollection;return proxyCollection=[],$response=$((new DOMParser).parseFromString(data.responseText,"text/xml")),$(".row0, .row1",$response).each(function(){var tdl;return tdl=$(this).find("td a"),proxyCollection.push({host:$.trim($(tdl[1]).text()),port:parseInt($(tdl[2]).text(),10),type:$(tdl[3]).text()})}),infoWindow.setPosition(country.geometry.location),infoWindow.setContent(infoTemplate(proxyCollection)),infoWindow.open(map),proxySwitchEnabled?$(".info-window").on("click",".proxy-switch",function(event){var proxy,proxyIndex;return proxyIndex=$(event.target).closest("tr").attr("data-index"),proxy=proxyCollection[proxyIndex],window.postMessage({type:"OP_PROXY_ON",body:proxy},"*"),!1}):void 0})})}),proxySwitchEnabled=!1,infoTemplate=function(proxies){var i,proxy,trc;return 0===proxies.length?"<div>No proxies in this location</div>":(trc=proxySwitchEnabled?"proxy-switch":"","<div class='info-window'>                <table>                    <thead><tr><th>Host</th><th>Port</th><th>Type</th></tr></thead>                    <tbody>                        "+function(){var _i,_len,_results;for(_results=[],i=_i=0,_len=proxies.length;_len>_i;i=++_i)proxy=proxies[i],_results.push('<tr class="'+trc+'" data-index="'+i+'">'+"<td>"+proxy.host+"</td><td>"+proxy.port+"</td><td>"+proxy.type+"</td>"+"</tr>");return _results}().join("")+"                    </tbody>                </table>            </div>")},infoWindow=new google.maps.InfoWindow,marker=new google.maps.Marker({map:map}),google.maps.event.addListener(marker,"click",function(){return infoWindow.open(map,marker)}),$.getJSON("http://freegeoip.net/json/?callback=?",function(data){var clientLatLng;return clientLatLng=new google.maps.LatLng(data.latitude,data.longitude),map.setCenter(clientLatLng),findCountry(clientLatLng).done(function(country){return marker.setPosition(country.geometry.location)})}),window.addEventListener("message",function(event){return"OP_CHROME_EXTENSION_INITIALIZED"===event.data.type?proxySwitchEnabled=!0:void 0})})}.call(this);