jQuery.ajax=function(_ajax){function isExternal(url){return!exRegex.test(url)&&/:\/\//.test(url)}var protocol=location.protocol,hostname=location.hostname,exRegex=RegExp(protocol+"//"+hostname),YQL="http"+(/^https/.test(protocol)?"s":"")+"://query.yahooapis.com/v1/public/yql?callback=?",query='select * from html where url="{URL}" and xpath="*"';return function(o){var url=o.url;return/get/i.test(o.type)&&!/json/i.test(o.dataType)&&isExternal(url)&&(o.url=YQL,o.dataType="json",o.data={q:query.replace("{URL}",url+(o.data?(/\?/.test(url)?"&":"?")+jQuery.param(o.data):"")),format:"xml"},!o.success&&o.complete&&(o.success=o.complete,delete o.complete),o.success=function(_success){return function(data){_success&&_success.call(this,{responseText:(data.results[0]||"").replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,"")},"success")}}(o.success)),_ajax.apply(this,arguments)}}(jQuery.ajax);